- route:
    id: log-consumer
    from:
      uri: kafka
      parameters:
        autoOffsetReset: earliest
        brokers: "{{kafka.brokers}}"
        groupId: correlator
        securityProtocol: SSL
        sslTruststoreLocation: ./kafka-ca-cert.pem
        sslTruststoreType: PEM
        topic: otlp_logs
      steps:
        - log:
            loggingLevel: DEBUG
            message: Received log from Kafka \n ${body}
        - setHeader:
            id: set-logs-header
            expression:
              simple:
                expression: ${body}
            name: logs
        - setBody:
            id: set-dummy-xml
            expression:
              constant:
                expression: <dummy/>
        - step:
            id: kaoto-datamapper-4a94acc3
            steps:
              - to:
                  id: kaoto-datamapper-xslt
                  uri: xslt-saxon:kaoto-datamapper-4a94acc3.xsl
                  parameters:
                    allowStAX: true
        - log:
            loggingLevel: DEBUG
            message: "Mapped output: ${body}"
        - to:
            id: to-2266
            uri: direct
            parameters:
              name: store
