- route:
    id: log-consumer
    from:
      uri: kafka:{{camel.kafka.topic.logs}}
      parameters:
        autoOffsetReset: earliest
        groupId: correlator
      steps:
        - log:
            loggingLevel: DEBUG
            message: Received log from Kafka \n ${body}
        - split:
            id: split-logs
            expression:
              jsonpath:
                expression: $.resourceLogs[*].scopeLogs[*].logRecords[*]
                writeAsString: true
            steps:
              - setHeader:
                  id: set-logs-header
                  expression:
                    simple:
                      expression: ${body}
                  name: logs
              - setBody:
                  id: set-dummy-xml
                  expression:
                    constant:
                      expression: <dummy/>
              - step:
                  id: kaoto-datamapper-4a94acc3
                  steps:
                    - to:
                        id: kaoto-datamapper-xslt
                        uri: xslt-saxon:kaoto-datamapper-4a94acc3.xsl
                        parameters:
                          allowStAX: true
              - log:
                  loggingLevel: DEBUG
                  message: "Mapped output: ${body}"
              - to:
                  id: to-2266
                  uri: direct
                  parameters:
                    name: store
