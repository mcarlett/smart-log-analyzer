- route:
    id: trace-consumer
    from:
      uri: kafka
      parameters:
        autoOffsetReset: earliest
        brokers: "{{kafka.brokers}}"
        groupId: correlator
        securityProtocol: SSL
        sslTruststoreLocation: ./kafka-ca-cert.pem
        sslTruststoreType: PEM
        topic: otlp_spans
      steps:
        - log:
            loggingLevel: DEBUG
            message: Received trace from Kafka
        - setHeader:
            id: set-traces-header
            expression:
              simple:
                expression: ${body}
            name: traces
        - setBody:
            id: set-dummy-xml-1
            expression:
              constant:
                expression: <dummy/>
        - step:
            id: kaoto-datamapper-8f5bb2dd
            steps:
              - to:
                  id: kaoto-datamapper-xslt-1526
                  uri: xslt-saxon:kaoto-datamapper-8f5bb2dd.xsl
                  parameters:
                    allowStAX: true
        - log:
            loggingLevel: DEBUG
            message: "Mapped output: ${body}"
        - to:
            id: to-22661
            uri: direct
            parameters:
              name: store
